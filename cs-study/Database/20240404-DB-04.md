# 20240404 4차 DB 스터디

일시 : 2024 - 04 - 04 (목)

질문자 : 이강현

답변자 : 최은혜, 최다환, 오유진

범위 : [데이터베이스 개론 3판: 김연희 저]
ch7. 데이터베이스 언어 SQL

<hr>

### Q1. 데이터 정의어, 조작어, 제어어 에 대해 하나씩 설명해주세요

유진 : 데이터 정의어는 CREATE, DROP, ALTER 세개가 있습니다. 정의어는 테이블을 정의하거나 삭제, 변경하는 기능을 합니다

은혜 : 세가지는 관계형 DB를 다룰때 사용할 수 있는 언어입니다. 그 중에 데이터 조작어는 이미 생성된 테이블에 있는 데이터를 검색, 삽입, 수정, 삭제할 때 사용하는 언어입니다 INSERT SELECT DELETE UPDATE의 조작 기능이 있습니다.

다환 : 정의어는 테이블을 생성하거나 수정 삭제할떄 사용합니다. 조작어는 테이블의 데이터를 삽입, 수정, 삭제, 검색하는 언어입니다 제어어는 DB에 접근 권한을 부여하거나 취소할 때 사용하는 언어입니다.

```
Sol) 데이터 정의어란 테이블을 생성하고 변경 및 삭제하는 기능을 제공하는 SQL입니다.

  데이터 조작어란 테이블에 새 데이터를 삽입하거나, 테이블에 저장된 데이터를 수정, 삭제 및 검색하는 기능 제공하는 SQL입니다.
  
  데이터 제어어란 보안을 위해 데이터에 대한 접근 및 사용 권한을 사용자별로 부여하거나 취소하는 기능 제공하는 SQL입니다.
```

<hr>

### Q2. View의 개념과 장단점에 대해 아는만큼 설명해주세요

다환 : 뷰란 데이터베이스 내에서 물리적으로 구현된게 아닌 논리적으로 구현되어 있는 테이블처럼 사용되는 것입니다. 기본적으로는 테이블을 기반으로 생성이 되지만 다른 뷰를 기반으로 생성되기도 합니다. 장점은 데이터 관리가 수월하고 사용자가 우리가 생성한 뷰에만 접근할 수 있게 설정해둔다면 다른 데이터에 접근할 수 없기 때문에 보안에 유리한 장점이 있습니다.

은혜 : 뷰란 가상의 데이터베이스 테이블로 논리적으로만 존재하는 것입니다. 뷰의 장점으로는 뷰를 사용하게 되면 사용자가 데이터 조회를 편리하게 할 수 있다는 장점이 있고 보안 관리가 용이합니다 하지만 뷰는 삽입, 삭제, 수정 작업이 조건에 따라 다르게 작용될 수 있습니다. 예를 들면 DISTINCT로 구성된 뷰는 수정이 불가능합니다.

유진 : 뷰는 데이터베이스를 기반으로 처리되는 결과를 볼 수 있는 것입니다. 뷰의 장점으로는 뷰의 결과를 보고 데이터 질의를 작성하기 편리하다는 장점이 있습니다. 보안에 용이하며 데이터 관리에 효과적인 역할을 합니다. 뷰의 단점은 수정을 하는 데에 있어서 제약 조건이 있다는 것입니다. 예를 들어 뷰의 속성이 기본키를 갖고 있다면 수정 자체가 불가능하고 NULL을 허용하지 않으면 수정이 거의 허용되지 않는다는 단점이 있습니다.

```
Sol) 뷰란 다른 테이블을 기반으로 만들어진 가상 테이블, 실제로 데이터를 저장하지는 않으며 테이블에서 사용자가 필요로 하는 부분만 선택하여 만들어놓은 데이터의 집합입니다.

  장점으로는 질의문을 더 쉽게 작성할 수 있고, 데이터의 보안 유지에 도움이 됩니다. 데이터를 편하게 관리할 수 있으며 복잡한 쿼리를 단순화 및 재사용 가능합니다.

  단점으로는 한 번 정의된 뷰는 변경할 수 없으며, 삽입-삭제-갱신에 제한사항이 많습니다. 또한 자신만의 인덱스 가지기 불가능합니다.
```

<hr>

### Q3. View가 데이터를 실제로 저장하고 있지 않는 가상 테이블임에도 생성해두면 SELECT 문을 사용해 데이터를 검색할 수 있는 이유가 뭘까요?

유진 : 뷰는 일반 테이블에 있는 속성을 갖고 와서 조회를 할 수 있고 이에 따라 뷰에서 SELECT 문을 실행했을 때 기본 테이블에서 SELECT 문으로 바뀌어 조회가 되기 때문입니다.

은혜 : 뷰가 가상 테이블임에도 SELECT 문을 사용해 데이터를 검색할 수 있는 이유는 뷰가 SELECT 문을 실행했을 떄 기본 테이블에 SELECT 문으로 변경되어 조회되기 때문입니다.

다환 : 뷰는 논리적으로만 구성되어 있지만 조회가 가능한 이유는 뷰를 조회하기 위해서 SELECT 문을 사용했을 때 기본 테이블에서 SELECT 문으로 조회하는 것으로 바뀌어 처리되기 때문에 조회가 가능합니다.

```
Sol) 뷰에 대한 SELECT 문이 내부적으로는 기본 테이블에 대한 SELECT 문으로 변환되어 수행되기 때문입니다.

(INSERT, UPDATE, DELETE 문도 뷰를 대상으로 수행할 수 있긴 하지만 기본 테이블에 수행되기 때문에 결과적으로는 기본 테이블이 변해서 뷰를 통한 기본 테이블의 변화는 보통 제한적임)
```

<hr>

### Q4. SQL의 데이터 검색 방법에는 다양한 방법이 있는데, 이 중에서 그룹 검색, 조인 검색, 부속 질의문 검색 중 원하는 하나를 골라 아는만큼 설명해주세요

다환 : 서브 쿼리문을 이용한 검색에 대해 설명하겠습니다. 서브 쿼리문은 SELECT 문 안에 SELECT 문이 있는것을 서브 쿼리라고 합니다. 일반적으로 큰 SELECT 문을 메인 쿼리라고 하고 안에 있는 SELECT 문을 서브 쿼리라고 합니다. 서브 쿼리문은 SELECT문에서 사용될 때 다른 테이블에서 가져오는 데이터들을 속성으로 지정할 수 있고 이는 alias를 통해 속성의 이름을 재설정할 수 있습니다.

은혜 : 그룹 검색에 대해 설명하겠습니다. 해당 테이블에서 그룹화하여 보고 싶은 속성들이 있다면 그것을 모아서 처리하는 하는 명령어입니다. 그룹에 대한 조건을 설정하기 위해선 HAVING 명령문을 사용하여 조건을 설정할 수 있습니다.

유진 : 조인 검색에 대해 설명하겠습니다. 조인은 INNER 조인과 OUTER 조인으로 작성을 할 수 있으며 공통된 내용을 조회할 때는 INNER 조인을 사용하고 둘 중에 한 개의 테이블이라도 포함하는 내용도 추출하고 싶다면 LEFT, RIGHT, FULL OUTER 조인을 사용하여 원하는 결과를 얻을 수 있습니다.

```
Sol) 그룹 검색이란 그룹별로 검색을 하는 방법입니다. 이를 위해서는 GROUP BY 키워드를 사용하고, 그룹에 대한 조건을 추가하려면 HAVING 키워드와 함께 사용, GROUP BY 키워드가 없는 SELECT 문은 테이블 전체를 하나의 그룹으로 보고 검색하는 것입니다.

  조인 검색이란 여러 개의 테이블을 연결하여 데이터를 검색하는 방법입니다. 이를 위해서는 테이블을 연결해주는 속성이 필요하고 이를 조인 속성이라 합니다. 테이블을 연결하려면 조인 속성의 이름은 달라도 되지만 도메인은 반드시 같아야 하며, 일반적으로 외래키를 조인 속성으로 사용합니다.

  부속 질의문이란 SELECT 문 안에 또 다른 SELECT 문을 포함하는 검색 방법입니다. 상위 질의문(주 질의문)과 부속 질의문(서브 질의문)으로 나뉘어 있으며, 부속 질의문은 괄호로 묶어 작성하고 ORDER BY 절 사용이 불가능합니다.
```

<hr>

### Q5. 삽입 SQL의 개념과 특징에 대해 설명해주세요

유진 : 삽입 SQL은 기존 SQL과 달리 어디에서나 삽입을 할 수 있다는 장점이 있습니다. 먼저 BEGIN DECLARE 를 통해서 삽입 SQL을 시작하고 EXEC SQL 이라고 선언 후 원하는 내용을 삽입을 할 수 있습니다. 끝나면 END DECLARE 를 통해 삽입 SQL이 끝났다는 것을 선언하는 방식으로 사용합니다.

은혜 : 삽입 SQL 문이란 프로그래밍 언어를 사용하는 응용 프로그램 내에서 사용하는 SQL 문입니다. 특징으로는 삽입 SQL 문은 프로그램 안에서 일반 명령문이 위치 가능한 곳이라면 어느 위치에도 삽입 가능하다는 특징이 있고, 커서를 사용해 복합행을 관리, 커서를 사용하지 않고 단일행을 관리합니다.

다환 : 삽입 SQL은 JAVA, C, C++ 과 같은 프로그래밍 언어를 사용하는 응용 프로그램 내에 삽입하는 SQL 문입니다. 삽입 SQL을 사용할 떄는 앞에 EXEC를 붙여 사용합니다. 변수를 선언할 때는 BEGIN DECLARE 를 사용하고 END DECLARE 를 사용해서 마무리 되었음을 보여줍니다. 삽입 SQL 내에서 일반 변수를 사용할 때는 일반 변수라는 것을 구분하기 위해 콜론( : )을 붙여 표현합니다. 커서를 사용하는 SQL문과 커서를 사용하지 않는 SQL문이 있는데 여기서 커서란 복합행을 반환하는 테이블에서 한 튜플을 집어주는 포인터 역할을 하는 것을 커서라고 합니다. 커서를 사용하지 않는 SQL문은 단일행을 반환하는 SELECT문, INSERT문, CREATE문, UPDATAE문 등 모두 커서를 사용하지 않는 SQL문입니다. 커서를 사용하는 SQL문은 복합행을 반환하는 SELECT문을 커서를 사용하는 SQL문이라고 합니다. 커서를 만들 때는 커서와 연결되는 SELECT문을 사용해서 커서와 연결을 시키고 실행했다면 FETCH 명령어를 통해서 지금 커서가 가르키고 있는 행에 대한 값들을 변수에 저장할 수도 있습니다.

```
Sol) 삽입 SQL의 개념은 C, C++, JAVA 등과 같은 프로그래밍 언어로 작성된 응용 프로그램 안에 삽입하여 사용하는 SQL 문입니다.

특징으로는 삽입 SQL 문은 프로그램 안에서 일반 명령문이 위치할 수 있는 곳이면 어디든 삽입 가능하며,

프로그램 안의 일반 명령문과 구별하기 위해 삽입 SQL 문 앞에 EXEC SQL을 붙이며,

프로그램에 선언된 일반 변수를 삽입 SQL 문에서 사용할 수 있지만 SQL 문에서 일반 변수를 사용할 때는 앞에 콜론(:)을 붙여 테이블 이름이나 속성의 이름과 구분하여 사용한다는 특징이 있습니다.
```
